---
title: "git使用随笔"
date: "2025-11-26"
description: "关于git的学习笔记，包括提交信息、约定式提交、错误修正、git flow和语义化版本管理。"
---

# git使用随笔

## 提交信息

- 没必要强迫自己使用英语，对现在的自己和未来的自己都不友好，反正你又不是在进行国际开发

- 记得约定式提交

  ### 约定式提交

  - 注意：第一个**空行**前都视为**标题**

    1. 错误的做法
  
    ```
    feat: 这是我的提交标题
    - 我想把详细信息写在这里（但是这一行还是标题！
    ```

    2. 正确的做法
  
      ```
      feat: 我的标题
      
      - 把信息写在这里
      ```

       

  - 在提交类型后增加**空格**
  
    ```
    feat: <-看这个地方
    ```

  - 合并提交/PR不需要遵守约定式提交

    因为该写的已经在每一个提交里写好了

  - 注意一下BREAKING CHANGE

    ~~虽然个人开发可能都没什么破坏性变更~~

    ### 约定式提交的类型

    我一直在被这个问题困扰，记录一下
  
    | 修改内容                                      | 提交类型     | 备注                   |
    | --------------------------------------------- | ------------ | ---------------------- |
    | gitignore这种又不是开发，又不是构建的配置文件 | chore        | 杂项                   |
    | docker-compose这种构建时的配置文件            | build        | 用作生产环境构建       |
    | 日志输出                                      | fix/refactor | 没有用户可感知的新功能 |
    | 改了一大堆东西，但是**没有新功能**            | refactor     | 不要什么都是feat       |

## 当你犯错

实际上问题不大

1. git会有完备的历史记录，反正你的文件肯定不会丢，实在不放心复制整个文件夹吧
2. 你大可以自由的修改提交历史
3. 如果有Github仓库，强推（合作时需要注意

### 修正

1. 如果你想修正上一个提交

   ```
   git commit --amend
   ```

2. 如果你想撤销行为

   ``` 
   git reflog
   # 这个命令会列出你的所有操作，找到你想要回到的状态，记住HEAD@{n}里n是几，然后：
   git reset HEAD@{n}
   # 这会让你回答对应的提交，工作区的修改会被保留，如果你想放弃修改：
   git reset --hard HEAD@{n}
   ```

   > 如果你刚刚进行了一次危险操作，例如rebase，merge，还有一个快捷的方式
   >
   > ``` 
   > git reset ORIG_HEAD
   > ```

3. 自由的修改提交

   你需要交互式变基(interactive rebase)

   找到你想要修改的提交的上一个提交，记下它的hash

   ``` 
   git rebase -i the_hash_you_choose
   ```

   > 如果你想在保留合并提交的情况下修改一个分支里的提交，需要使用
   >
   > ``` 
   > git rebase -i -r the_hash
   > ```
   >
   > 但是需要注意的是，似乎合并提交是没法被修改的，我的合并提交出问题的话我会选择直接reset改好之后再合并一次，也可能会有更好的方法，这个就请读者自行探索了

   然后会弹出一个编辑器窗口列出了所有的该hash对应的提交之后的提交，类似

   ``` 
   pick commit1
   pick commit2
   ```

   这个时候你就可以通过修改这个文件每一个提交前面的单词选择你的操作

   > 每个单词都可以简写成只有首字母的形式

   1. `pick` 不变
   2. `pick` 你也可以直接改变提交的顺序
   3. `edit` 变基会在该提交停止，等待你进行任何你想进行的更改，例如拆分成俩提交，添加更改等
   4. `reword` 变基会在该提交停止，然后你可以修改提交信息

   > 更多用法实际上你可以自己参考编辑器窗口下面的注释，以上只是一些我常用的
   >
   > 需要注意：变基实际上是把所有提交重新交一次，所以tag会错误指向，你也可以用tag在变基前备份，但是实际上更方便的方法是reset。
   >
   > edit会改变提交的编辑时间信息，如果只是想改一下提交信息用reword就好

   当你编辑好了，决定继续变基时，使用

   ``` 
   git rebase --continue
   ```

### 强制推送

> 合作时确保你的合作伙伴知情，否则最好的方法时重新创建一个提交进行修正

```
git push -f origin branch_name
```

## git flow

第一个问题， git flow 已经在最新的 git for windows 里被删除了，我就说我当时问AI怎么它都说是自带的，现在最简单地在 Windows 上使用 git flow 的方法是安装[v2.50.1]([Release Git for Windows 2.50.1 · git-for-windows/git](https://github.com/git-for-windows/git/releases/tag/v2.50.1.windows.1))

如果你想要专业一点，就不要直接往main上推送，而是推送develop分支，然后在GitHub上开PR把功能合并进main

> 如果你像我一样强迫症天天强推就算了，因为PR是不能删除的，如果你开了一个不太聪明的PR然后还把它合并了那就完蛋了

完了之后实际上git flow的工作流还算清晰，感觉都没啥能记的

## SemVer

很好理解，实际上也没什么好说的，另外我鼓励初学者遵循“永远在main的每一个分支都打上版本号标签”的要求，相信我，看着版本号增加很好玩的